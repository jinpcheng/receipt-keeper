#!/bin/sh
set -e

if git diff --cached --name-only | grep -qE '^backend/'; then
  if [ -z "$TEST_DATABASE_URL" ]; then
    echo "TEST_DATABASE_URL not set; skipping backend tests." >&2
    exit 0
  fi
  echo "Running backend tests..."
  (cd backend && pytest)
fi
