services:
  caddy:
    image: caddy:2.8.4
    container_name: receipt-keeper-caddy
    depends_on:
      - api
    environment:
      # For phone testing, set to your PC's LAN IP before `docker compose up`.
      # Example: PowerShell `$env:CADDY_HOST="192.168.1.50"`
      CADDY_HOST: ${CADDY_HOST:-localhost}
    ports:
      - "8443:8443"
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile:ro
      - receipt_keeper_caddy_data:/data
      - receipt_keeper_caddy_config:/config

volumes:
  receipt_keeper_caddy_data:
  receipt_keeper_caddy_config:

